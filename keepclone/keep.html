<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>googgle keep</title>
    <script src="https://kit.fontawesome.com/c30214a360.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="keep.css">
    
</head>
<body>
    <div class="heading">
        <h1><i class="fa-solid fa-note-sticky"></i> My keep Cloan</h1>
        </div>
        <div class="btn-div">
            <button class="learn-more" class="add" id="add">
                <span class="circle" aria-hidden="true">
                <span class="icon " class="arrow"></span></span>
                <span class="button-text"><b>&#x2192;</b> Add Note</span>
            </button>
        </div>
        <!-- <div class="note">
            <div class="operation">
                <button class="edit"><i class="fas fa-edit"></i></button>
                <button class="delete"><i class="fas fa-trash-alt"></i></button>
            </div> -->
            <!-- <div class="main"></div>
            <textarea class=""></textarea> -->
            <div class="note">
                <a href=""></a>
                <p></p>
            </div>
        </div>
        <script>
            const addButton=document.querySelector('#add')
            const updateLSData=()=>{
                textareaData=document.querySelectorAll('textarea')
                const notes = [];
                console.log(textareaData)
                textareaData.forEach((note) => {
                    return notes.push(note.value)
        
                    
                });
                console.log(notes);
                localStorage.setItem('notes',JSON.stringify(notes))
            }
            const addNewNote=(text ='')=>{
                const note =document.createElement('div')
                note.classList.add('note');
                const htmlData=`
                 <div class="note">
            <div class="operation">
                <button class="edit"><i class="fas fa-edit"></i></button>
                <button class="delete"><i class="fas fa-trash-alt"></i></button>
            </div> 
             <div class="main ${text? "":"hidden"}"></div>
            <textarea class="${text? "hidden":""}"></textarea> `;
            note.insertAdjacentHTML('afterbegin',htmlData)
            // console.log(note)
            // getting the refreence
            const editButton = note.querySelector('.edit');
            const delButton = note.querySelector('.delete');
            const mainDiv = note.querySelector('.main');
            const textarea = note.querySelector('textarea');
            // deleting the node
            delButton.addEventListener('click',()=>{
                note.remove();
                updateLSData()
            })
            // toggle edit button
            textarea.value=text;
            mainDiv.innerHTML=text;
            editButton.addEventListener('click',()=>{
                mainDiv.classList.toggle('hidden');
                textarea.classList.toggle('hidden')
            })
            textarea.addEventListener('change',(event)=>{
                const value =event.target.value;
                mainDiv.innerHTML=value;
                updateLSData()
                
            })

            document.body.appendChild(note)

            }
            // getting data back from localStorage
            const notes = JSON.parse(localStorage.getItem('notes'))
            if(notes){notes.forEach((note)=>addNewNote(note)) }
            addButton.addEventListener('click',()=>

                addNewNote());

        </script>

        
</body>
</html>