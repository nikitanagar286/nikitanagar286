<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration form</title>
    <script src="https://kit.fontawesome.com/c30214a360.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="index.css">
    
</head>
<body>
   <div class="container">
    <div class="headder">
        <h2>REGISTRATION FORM</h2>
    </div>
    <form class="form" id="form">
        <div class="form-control">
            <label for="username">Username</label>
            <input type="text" name="" id="username" placeholder="Enter your fullname" autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error msg</small>
        </div>
        <div class="form-control">
            <label for="E-mail">E-mail</label>
            <input type="email" name="" id="e-mail" placeholder="Enter your E-mail" autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error msg</small>
        </div>
        <div class="form-control">
            <label for="phone no">Phone Number</label>
            <input type="number" name="" id="phone" placeholder="Enter your phonenumber" autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error msg</small>
        </div>
        <div class="form-control">
            <label for="pasword">password</label>
            <input type="password" name="" id="password" placeholder="Enter your password" autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error msg</small>
        
        <div class="form-control">
            <label for="pasword">Confirm password</label>
            <input type="password" name="" id="cpassword" placeholder="Enter your password" autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error msg</small>
        </div>
        <input type="submit" value="submit" class="btn" name="">
    </form>
   </div> 

   <script>
    const form=document.getElementById('form');
    const username=document.getElementById('username');
    const email=document.getElementById('e-mail');
    const phone=document.getElementById('phone');
    const password=document.getElementById('password');
    const cpassword=document.getElementById('cpassword');
    // add event
    form.addEventListener('submit',(event)=>{
        event.preventDefault();
        validate();
    })
    
     const sendData=(count)=>{
         if(sRate=count){
            alert('Regisitration sucessful')
           location.href=`demo.html?username`
         }

     }
    // for final data vaildation
    const SuccessMsg =(usernameval)=>{
        let formcon= document.getElementsByClassName('form-control')
        var count=formcon.length-1;
    for(var i=0; i<formcon.length;i++){
        if (formcon[i].className==="form-control success") {
            var sRate=0+i;
            console.log(sRate)
            sendData(count,sRate);

        }else{
            return false;}
        }
        }
    
    // more email validate
    const isEmail =(emailval)=>{
        var atsymbol=emailval.indexOf("@");
        if(atsymbol<1){return false;}
        var dot=emailval.lastIndexOf('.');
        if(dot<=atsymbol+2){return false;}
        if(dot===emailval.length-1){return false}
        return true;
        }
    //define the validate function
    const validate=()=>{
    const usernameval=username.value.trim()
    const emailval= email.value.trim()
    const phoneval=phone.value.trim()
    const passwordval=password.value.trim()
    const cpasswordval=cpassword.value.trim()
    // validate username
    if(username===""){
        setErrorMsg(username,'username cannot be blank')
    }else if(usernameval.length<=2){
        setErrorMsg(username,'username min 3 char');
    }else{
        setSuccessMsg(username);
    }
    // validate email
    if(emailval===""){
        setErrorMsg(email,'email cannot be blank')
    }else if(!isEmail(emailval)){
        setErrorMsg(email,'not a vaild email');
    }else{
        setSuccessMsg(email);
    }
    
    // validate for phone
    if(phoneval===""){
        setErrorMsg(phone,'phone cannot be blank')
    }else if(phoneval.length!=10){
        setErrorMsg(phoneval,'not a vaild phone');
    }else{
        setSuccessMsg(phone);
    }
    // validate for password
    if(passwordval===""){
        setErrorMsg(password,'password cannot be blank')
    }else if(passwordval.length<=5){
        setErrorMsg(passwordval,'minimum 6 char');
    }else{
        setSuccessMsg(password);
    }
    //validate cpassword//
    if(cpassword===""){
        setErrorMsg(cpassword,'confirm password cannot be blank')
    }else if(passwordval!=cpasswordval){
        setErrorMsg(cpasswordval,'password are not matching');
    }else{
        setSuccessMsg(cpassword);
    }
    SuccessMsg(usernameval);
    }
    
    function setErrorMsg(input,errormsgs){
        const formcontrol=input.parentElement;
        console.log(formcontrol)
    const small=formcontrol.querySelector('small')

     formcontrol.className="form-control error";
      small.innerText=errormsgs;
    }
    function setSuccessMsg(input){
        const formcontrol=input.parentElement;
        formcontrol.className="form-control success"
        
      const small=formcontrol.querySelector('small')
   
    }


   </script>
</body>

</html>